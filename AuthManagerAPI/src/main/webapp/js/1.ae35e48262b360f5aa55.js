webpackJsonp([1],{367:function(e,t,r){function s(e){r(430)}var i=r(1)(r(403),r(447),s,null,null);e.exports=i.exports},369:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regex=t.ref=t.len=t.req=t.withParams=void 0;var s=r(393),i=function(e){return e&&e.__esModule?e:{default:e}}(s);t.withParams=i.default;var a=t.req=function(e){if(Array.isArray(e))return!!e.length;if(void 0===e||null===e||!1===e)return!1;if("object"==typeof e){for(var t in e)return!0;return!1}return!!String(e).length};t.len=function(e){return Array.isArray(e)?e.length:"object"==typeof e?Object.keys(e).length:String(e).length},t.ref=function(e,t,r){return"function"==typeof e?e.call(t,r):r[e]},t.regex=function(e,t){return(0,i.default)({type:e},function(e){return!a(e)||t.test(e)})}},378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=(0,s.regex)("alpha",/^[a-zA-Z]*$/)},379:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=(0,s.regex)("alphaNum",/^[a-zA-Z0-9]*$/)},380:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.withParams)({type:"and"},function(){for(var e=this,r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];return t.length>0&&t.reduce(function(t,r){return t&&r.apply(e,s)},!0)})}},381:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(e,t){return(0,s.withParams)({type:"between",min:e,max:t},function(r){return!(0,s.req)(r)||!/\s/.test(r)&&+e<=+r&&+t>=+r})}},382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369),i=/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/;t.default=(0,s.regex)("email",i)},383:function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.and=t.or=t.url=t.sameAs=t.requiredUnless=t.requiredIf=t.required=t.minLength=t.maxLength=t.email=t.between=t.numeric=t.alphaNum=t.alpha=void 0;var i=r(378),a=s(i),u=r(379),n=s(u),o=r(386),l=s(o),c=r(381),p=s(c),d=r(382),f=s(d),h=r(384),m=s(h),g=r(385),v=s(g),b=r(388),y=s(b),_=r(389),x=s(_),k=r(390),T=s(k),w=r(391),A=s(w),L=r(392),j=s(L),P=r(387),q=s(P),M=r(380),C=s(M);t.alpha=a.default,t.alphaNum=n.default,t.numeric=l.default,t.between=p.default,t.email=f.default,t.maxLength=m.default,t.minLength=v.default,t.required=y.default,t.requiredIf=x.default,t.requiredUnless=T.default,t.sameAs=A.default,t.url=j.default,t.or=q.default,t.and=C.default},384:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(e){return(0,s.withParams)({type:"maxLength",max:e},function(t){return!(0,s.req)(t)||(0,s.len)(t)<=e})}},385:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(e){return(0,s.withParams)({type:"minLength",min:e},function(t){return!(0,s.req)(t)||(0,s.len)(t)>=e})}},386:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=(0,s.regex)("numeric",/^[0-9]*$/)},387:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.withParams)({type:"or"},function(){for(var e=this,r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];return t.length>0&&t.reduce(function(t,r){return t||r.apply(e,s)},!1)})}},388:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=(0,s.withParams)({type:"required"},s.req)},389:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(e){return(0,s.withParams)({type:"requiredIf",prop:e},function(t,r){return!(0,s.ref)(e,this,r)||(0,s.req)(t)})}},390:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(e){return(0,s.withParams)({type:"requiredUnless",prop:e},function(t,r){return!!(0,s.ref)(e,this,r)||(0,s.req)(t)})}},391:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369);t.default=function(e){return(0,s.withParams)({type:"sameAs",eq:e},function(t,r){return t===(0,s.ref)(e,this,r)})}},392:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(369),i=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/;t.default=(0,s.regex)("url",i)},393:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(114).withParams;t.default=s},403:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(33),i=(r.n(s),r(0)),a=r(383);r.n(a);t.default={name:"UserManage",mixins:[s.viewMixin],mounted:function(){var e=this;this.userBackup=r.i(i.extend)({},this.user),this.groupBackup={groupId:null,groupName:"",description:""},this.get("getAuthLookupTypePairs",{type:"UserSourceType"},function(t){t&&t.length>0&&(e.sourceTypeOptions=t,e.user.sourceType=e.userBackup.sourceType=t[0].value)}),this.get("getAuthGroupList",{},function(t){e.allGroupList=t})},data:function(){return{search:{userAccount:"",displayName:""},user:{userId:null,userAccount:"",displayName:"",sourceType:"SDB",email:"",isActive:"Y"},userTemp:{},userList:[],allGroupList:[],groupList1:[],groupList2:[],group1:{},group2:{},sourceTypeOptions:[],isActiveOptions:[{label:"生效",value:"Y"},{label:"失效",value:"N"}],columns:[{label:"帳號",field:"userAccount",width:"100px",sort:!0},{label:"顯示名稱",field:"displayName",width:"100px",sort:!0},{label:"帳號來源",field:"sourceType",width:"100px",sort:!0},{label:"Email",field:"email",width:"150px",sort:!0},{label:"是否生效",field:"isActive",width:"50px",sort:!0,formatter:function(e){return e&&"N"===e?"失效":"生效"}},{label:"備註",field:"memo",width:"200px",sort:!0}]}},methods:{initGroup:function(){var e=this;this.userTemp.userId?this.get("getAuthUserGroup",this.userTemp,function(t){e.groupList2=e.allGroupList.filter(function(e){return 0===t.filter(function(t){return t.groupId===e.groupId}).length}),e.groupList1=t,e.clearGroup()}):(this.clearGroup(),this.groupList2=this.allGroupList,this.groupList1=[])},selectGroup1:function(e){this.group1===e&&(e=r.i(i.extend)({},this.groupBackup)),this.group1=e},selectGroup2:function(e){this.group2===e&&(e=r.i(i.extend)({},this.groupBackup)),this.group2=e},clearGroup:function(){this.group1=r.i(i.extend)({},this.groupBackup),this.group2=r.i(i.extend)({},this.groupBackup)},moveLeft:function(){var e=this;this.user.userId&&this.group2.groupId&&(this.groupList1.push(this.group2),this.groupList2=this.groupList2.filter(function(t){return t.groupName!==e.group2.groupName}),this.clearGroup())},moveRight:function(){var e=this;this.user.userId&&this.group1.groupId&&(this.groupList2.push(this.group1),this.groupList1=this.groupList1.filter(function(t){return t.groupName!==e.group1.groupName}),this.clearGroup())},moveAllLeft:function(){this.user.userId&&(this.groupList1=this.groupList1.concat(this.groupList2),this.groupList2=[],this.clearGroup())},moveAllRight:function(){this.user.userId&&(this.groupList2=this.groupList2.concat(this.groupList1),this.groupList1=[],this.clearGroup())},userChecked:function(){var e=this.$refs.userTable.getChecked();this.user=e?r.i(i.extend)({},e):r.i(i.extend)({},this.userBackup)},findUser:function(){this.$refs.pager.search(this.search),this.user=r.i(i.extend)({},this.userBackup),this.clearGroup(),this.groupList2=this.groupList1=[]},clearSearch:function(){this.search=r.i(i.extend)({},this.userBackup),this.$refs.pager.clean(),this.user=r.i(i.extend)({},this.userBackup)},addUser:function(){this.userTemp=r.i(i.extend)({},this.userBackup),this.initGroup(),this.$refs.userModal.open(),this.$refs.tabs.selectTab("tab-user")},editUser:function(){this.userTemp=r.i(i.extend)({},this.user),this.userTemp.isActive=this.userTemp.isActive?this.userTemp.isActive:"Y",this.initGroup(),this.$refs.userModal.open(),this.$refs.tabs.selectTab("tab-user")},saveUser:function(){var e=this;this.userTemp.userAccount?this.userTemp.displayName?this.userTemp.email?r.i(a.email)(this.userTemp.email)?this.put("saveAuthUser",this.userTemp,function(t){e.post("saveAuthUserGroup/"+t.userId,e.groupList1,function(){e.$refs.userModal.close(),e.showSuccess("帳號儲存成功",3e3),e.findUser()})}):this.showError("Email輸入格式錯誤"):this.showError("請輸入Email"):this.showError("請輸入顯示名稱"):this.showError("請輸入帳號")},delUser:function(){var e=this;this.confirm("刪除帳號","是否確定刪除該帳號？",function(){e.delete("deleteAuthUser",{userId:e.user.userId},function(){e.showSuccess("帳號刪除成功",3e3),e.user=r.i(i.extend)({},e.userBackup),e.findUser()})})}},components:{QTabs:i.QTabs,QTab:i.QTab,QTabPane:i.QTabPane,QList:i.QList,QItem:i.QItem,QItemMain:i.QItemMain,QScrollArea:i.QScrollArea}}},420:function(e,t,r){t=e.exports=r(353)(!1),t.push([e.i,".group-manage .q-card-actions{padding-left:0;padding-right:0}",""])},430:function(e,t,r){var s=r(420);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r(354)("4c1688a2",s,!0,{})},447:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-manage",staticStyle:{padding:"0 10px"}},[r("s-card",{attrs:{color:"darkblue",title:"帳號管理"}},[r("div",{staticClass:"row md-gutter justify-center",slot:"content"},[r("s-input",{staticClass:"col-4",attrs:{label:"帳號"},model:{value:e.search.userAccount,callback:function(t){e.search.userAccount=t},expression:"search.userAccount"}}),e._v(" "),r("s-input",{staticClass:"col-4",attrs:{label:"顯示名稱"},model:{value:e.search.displayName,callback:function(t){e.search.displayName=t},expression:"search.displayName"}})],1),e._v(" "),r("s-btn",{attrs:{color:"darkred"},on:{click:e.addUser},slot:"action"},[e._v("新增帳號")]),e._v(" "),r("s-btn",{attrs:{color:"darkred",disable:!e.user.userId},on:{click:e.editUser},slot:"action"},[e._v("編輯帳號")]),e._v(" "),r("s-btn",{attrs:{color:"darkred",disable:!e.user.userId},on:{click:e.delUser},slot:"action"},[e._v("刪除帳號")]),e._v(" "),r("s-btn",{attrs:{color:"darkred"},on:{click:e.findUser},slot:"action"},[e._v("查詢")]),e._v(" "),r("s-btn",{attrs:{color:"darkred"},on:{click:e.clearSearch},slot:"action"},[e._v("清除")])],1),e._v(" "),r("s-paginator",{ref:"pager",staticStyle:{"padding-bottom":"20px"},attrs:{url:"getAuthUserList","page-size":10},scopedSlots:e._u([{key:"default",fn:function(t){return[r("s-datatable",{ref:"userTable",attrs:{source:t.data,offset:t.offset,striped:"","line-numbers":"",checkboxs:""},on:{checked:e.userChecked}},e._l(e.columns,function(e,t){return r("s-datatable-column",{key:t,attrs:{column:e},slot:"columns"})}))]}}])}),e._v(" "),r("s-modal",{ref:"userModal",attrs:{title:"帳號維護",width:"800px",height:"550px"}},[r("template",{slot:"content"},[r("q-tabs",{ref:"tabs",attrs:{color:"deepblue",align:"center"}},[r("q-tab",{attrs:{default:"",name:"tab-user",label:"帳號維護"},slot:"title"}),e._v(" "),r("q-tab",{attrs:{name:"tab-group",label:"所屬群組"},slot:"title"}),e._v(" "),r("q-tab-pane",{attrs:{name:"tab-user"}},[r("div",{staticClass:"row justify-center"},[r("s-input",{staticClass:"col-8",attrs:{label:"帳號",flag:""},model:{value:e.userTemp.userAccount,callback:function(t){e.userTemp.userAccount=t},expression:"userTemp.userAccount"}})],1),e._v(" "),r("div",{staticClass:"row justify-center"},[r("s-input",{staticClass:"col-8",attrs:{label:"顯示名稱",flag:""},model:{value:e.userTemp.displayName,callback:function(t){e.userTemp.displayName=t},expression:"userTemp.displayName"}})],1),e._v(" "),r("div",{staticClass:"row justify-center"},[r("s-select",{staticClass:"col-8",attrs:{label:"帳號來源",options:e.sourceTypeOptions},model:{value:e.userTemp.sourceType,callback:function(t){e.userTemp.sourceType=t},expression:"userTemp.sourceType"}})],1),e._v(" "),r("div",{staticClass:"row justify-center"},[r("s-input",{staticClass:"col-8",attrs:{label:"Email",flag:""},model:{value:e.userTemp.email,callback:function(t){e.userTemp.email=t},expression:"userTemp.email"}})],1),e._v(" "),r("div",{staticClass:"row justify-center"},[e.userTemp.userId?r("s-select",{staticClass:"col-8",attrs:{label:"是否生效",options:e.isActiveOptions},model:{value:e.userTemp.isActive,callback:function(t){e.userTemp.isActive=t},expression:"userTemp.isActive"}}):e._e()],1),e._v(" "),r("div",{staticClass:"row justify-center"},[r("s-input",{staticClass:"col-8",attrs:{label:"備註",type:"textarea","min-rows":5,"max-height":100},model:{value:e.userTemp.memo,callback:function(t){e.userTemp.memo=t},expression:"userTemp.memo"}})],1)]),e._v(" "),r("q-tab-pane",{attrs:{name:"tab-group"}},[r("div",{staticClass:"row justify-between md-gutter"},[r("s-card",{staticClass:"col-5",attrs:{color:"darkblue",title:"<div class='full-width text-center'>已選群組</div>","title-align":"full-width"}},[r("q-scroll-area",{staticStyle:{height:"250px"},slot:"content"},[r("q-list",{attrs:{hightlight:"",link:"",separator:"",striped:""}},e._l(e.groupList1,function(t,s){return r("q-item",{key:s,on:{click:function(r){e.selectGroup1(t,r)}}},[r("q-item-main",{style:{color:e.group1.groupName===t.groupName?"red":"black"},attrs:{label:t.groupName}})],1)}))],1)],1),e._v(" "),r("s-card",{staticClass:"col",attrs:{color:"darkblue",title:"　"}},[r("div",{staticStyle:{height:"250px"},slot:"content"},[r("div",{staticClass:"row text-center items-center justify-center",staticStyle:{height:"25%"}},[r("s-btn",{staticStyle:{"padding-right":"5px"},attrs:{flat:"",icon:"fa-angle-right"},on:{click:e.moveRight}})],1),e._v(" "),r("div",{staticClass:"row text-center items-center justify-center",staticStyle:{height:"25%"}},[r("s-btn",{staticStyle:{"padding-right":"5px"},attrs:{flat:"",icon:"fa-angle-double-right"},on:{click:e.moveAllRight}})],1),e._v(" "),r("div",{staticClass:"row text-center items-center justify-center",staticStyle:{height:"25%"}},[r("s-btn",{staticStyle:{"padding-right":"5px"},attrs:{flat:"",icon:"fa-angle-double-left"},on:{click:e.moveAllLeft}})],1),e._v(" "),r("div",{staticClass:"row text-center items-center justify-center",staticStyle:{height:"25%"}},[r("s-btn",{staticStyle:{"padding-right":"5px"},attrs:{flat:"",icon:"fa-angle-left"},on:{click:e.moveLeft}})],1)])]),e._v(" "),r("s-card",{staticClass:"col-5",attrs:{color:"darkblue",title:"<div class='full-width text-center'>未選群組</div>","title-align":"full-width"}},[r("q-scroll-area",{staticStyle:{height:"250px"},slot:"content"},[r("q-list",{attrs:{hightlight:"",link:"",separator:"",striped:""}},e._l(e.groupList2,function(t,s){return r("q-item",{key:s,on:{click:function(r){e.selectGroup2(t,r)}}},[r("q-item-main",{style:{color:e.group2.groupName===t.groupName?"red":"black"},attrs:{label:t.groupName}})],1)}))],1)],1)],1)])],1)],1),e._v(" "),r("s-btn",{attrs:{color:"darkred",big:""},on:{click:e.saveUser},slot:"action"},[e._v("儲存")]),e._v(" "),r("s-btn",{attrs:{color:"darkred",big:""},on:{click:function(t){e.$refs.userModal.close()}},slot:"action"},[e._v("取消")])],2)],1)},staticRenderFns:[]}}});