webpackJsonp([10],{363:function(t,e,a){function i(t){a(433)}var s=a(1)(a(399),a(451),i,null,null);t.exports=s.exports},399:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(33),s=(a.n(i),a(0));e.default={name:"ApplicationManage",mixins:[i.viewMixin],mounted:function(){var t=this;this.apBackup=a.i(s.extend)({},this.ap),this.aItemBackup=a.i(s.extend)({},this.aItem),this.get("getAuthLookupTypePairs",{type:"Module"},function(e){e&&e.length>0&&(t.search.module=e[0].value,t.moduleOptions=e,t.getLookup())})},data:function(){var t=this;return{search:{module:"",applicationId:null},ap:{module:"",applicationId:null,applicationName:"",route:""},aItem:{applicationId:null,aItemId:null,aItemType:"B",aItemCode:"",aItemName:"",aItemDefaultValue:""},moduleOptions:[],apOptions:[],aItemTypeOptions:[{label:"按鈕",value:"B"},{label:"欄位",value:"F"},{label:"資料",value:"D"},{label:"功能檢視",value:"E"}],apTemp:{},aItemTemp:{},apList:[],aItemList:[],apColumns:[{label:"模組名稱",field:"module",width:"60px",sort:!0,formatter:function(e){var a=t.moduleOptions.filter(function(t){return t.value===e});return a&&a.length>0?a[0].label:""}},{label:"應用程式名稱",field:"applicationName",width:"100px",sort:!0}],itemColumns:[{label:"種類",field:"aItemType",width:"60px",sort:!0,formatter:function(e){var a=t.aItemTypeOptions.filter(function(t){return t.value===e});return a&&a.length>0?a[0].label:""}},{label:"功能代碼",field:"aItemCode",width:"80px",sort:!0},{label:"功能名稱",field:"aItemName",width:"80px",sort:!0},{label:"功能參數",field:"aItemDefaultValue",width:"130px",sort:!0}]}},methods:{getLookup:function(){var t=this;this.get("getAuthApplicationPairs",{module:this.search.module},function(e){e&&e.length>0&&(e.forEach(function(t){t.value=parseInt(t.value)}),e.unshift({label:"請選擇應用程式",value:null}),t.apOptions=e),t.searchBackup=a.i(s.extend)({},t.search),t.findAp()})},findAp:function(){var t=this;this.get("getAuthApplicationList",this.search,function(e){t.apList=e}),this.apBackup.module=this.search.module,this.ap=a.i(s.extend)({},this.apBackup)},findAItem:function(){var t=this;this.get("getAuthApplicationItemList",this.ap,function(e){t.aItemList=e}),this.aItemBackup.applicationId=this.ap.applicationId,this.aItem=a.i(s.extend)({},this.aItemBackup)},clearSearch:function(){this.search=a.i(s.extend)({},this.apBackup),this.apList=this.aItemList=[]},apChecked:function(){var t=this.$refs.apTable.getChecked();this.ap=t?a.i(s.extend)({},t):a.i(s.extend)({},this.apBackup),t?this.findAItem():(this.aItemList=[],this.aItem=a.i(s.extend)({},this.aItemBackup))},addAp:function(){this.apTemp=a.i(s.extend)({},this.apBackup),this.$refs.apModal.open()},editAp:function(){this.apTemp=a.i(s.extend)({},this.ap),this.$refs.apModal.open()},saveAp:function(){var t=this;this.apTemp.applicationName?this.apTemp.route?this.put("saveAuthApplication",this.apTemp,function(){t.$refs.apModal.close(),t.showSuccess("應用程式儲存成功",3e3),t.getLookup(),t.findAp()}):this.showError("請輸入應用程式路徑"):this.showError("請輸入應用程式名稱")},delAp:function(){var t=this;this.confirm("刪除應用程式","是否確定刪除該應用程式？",function(){t.delete("deleteAuthApplication",{applicationId:t.ap.applicationId},function(){t.showSuccess("應用程式刪除成功",3e3),t.ap=a.i(s.extend)({},t.apBackup),t.getLookup(),t.findAp()})})},itemChecked:function(){var t=this.$refs.aItemTable.getChecked();this.aItem=t?a.i(s.extend)({},t):a.i(s.extend)({},this.aItemBackup)},addItem:function(){this.aItemTemp=a.i(s.extend)({},this.aItemBackup),this.$refs.aItemModal.open()},editItem:function(){this.aItemTemp=a.i(s.extend)({},this.aItem),this.$refs.aItemModal.open()},saveItem:function(){var t=this;this.aItemTemp.aItemCode?this.aItemTemp.aItemName?this.put("saveAuthApplicationItem",this.aItemTemp,function(){t.$refs.aItemModal.close(),t.showSuccess("功能限制儲存成功",3e3),t.findAItem()}):this.showError("請輸入功能限制名稱"):this.showError("請輸入功能限制代碼")},delItem:function(){var t=this;this.confirm("刪除功能限制","是否確定刪除該功能限制？",function(){t.delete("deleteAuthApplicationItem",{aItemId:t.aItem.aItemId},function(){t.showSuccess("功能限制刪除成功",3e3),t.aItem=a.i(s.extend)({},t.aItemBackup),t.findAItem()})})}},components:{QCard:s.QCard,QCardTitle:s.QCardTitle,QCardMain:s.QCardMain,QCardActions:s.QCardActions,QCardSeparator:s.QCardSeparator,QList:s.QList,QItem:s.QItem,QItemMain:s.QItemMain,QScrollArea:s.QScrollArea}}},423:function(t,e,a){e=t.exports=a(353)(!1),e.push([t.i,".ap-manage .q-card-actions{padding-left:0;padding-right:0}",""])},433:function(t,e,a){var i=a(423);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(354)("61e3c5dd",i,!0,{})},451:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ap-manage",staticStyle:{padding:"0 10px"}},[a("s-card",{attrs:{color:"darkblue",title:"應用程式管理"}},[a("div",{staticClass:"row md-gutter justify-center",slot:"content"},[a("s-select",{staticClass:"col-4",attrs:{label:"模　　組",options:t.moduleOptions},model:{value:t.search.module,callback:function(e){t.search.module=e},expression:"search.module"}}),t._v(" "),a("s-select",{staticClass:"col-4",attrs:{label:"應用程式",options:t.apOptions},model:{value:t.search.applicationId,callback:function(e){t.search.applicationId=e},expression:"search.applicationId"}})],1),t._v(" "),a("s-btn",{attrs:{color:"darkred"},on:{click:t.findAp},slot:"action"},[t._v("查詢")]),t._v(" "),a("s-btn",{attrs:{color:"darkred"},on:{click:t.clearSearch},slot:"action"},[t._v("清除")])],1),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-5"},[a("q-card",[a("div",{staticClass:"card-header row items-center"},[a("q-card-title",{attrs:{"data-background-color":"darkblue"}},[a("span",{staticStyle:{color:"white"}},[t._v("應用程式設定")])]),t._v(" "),a("span",{staticClass:"s-card-title col-auto"})],1),t._v(" "),a("q-card-actions",{attrs:{align:"center"}},[a("div",{staticClass:"s-card-actions",attrs:{"data-background-color":"darkblue"}}),t._v(" "),a("s-btn",{staticStyle:{padding:"0 8px"},attrs:{color:"darkred",big:""},on:{click:t.addAp}},[t._v("新增應用程式")]),t._v(" "),a("s-btn",{staticStyle:{padding:"0 8px"},attrs:{color:"darkred",big:"",disable:!t.ap.applicationId},on:{click:t.editAp}},[t._v("編輯應用程式")]),t._v(" "),a("s-btn",{staticStyle:{padding:"0 8px"},attrs:{color:"darkred",big:"",disable:!t.ap.applicationId},on:{click:t.delAp}},[t._v("刪除應用程式")])],1),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-main",{staticStyle:{"padding-top":"10px"}},[a("q-scroll-area",{staticStyle:{height:"calc(100vh - 425px)"}},[a("s-datatable",{ref:"apTable",attrs:{source:t.apList,striped:"",checkboxs:""},on:{checked:t.apChecked}},t._l(t.apColumns,function(t,e){return a("s-datatable-column",{key:e,attrs:{column:t},slot:"columns"})}))],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"col",staticStyle:{"padding-left":"10px"}},[a("q-card",[a("div",{staticClass:"card-header row items-center"},[a("q-card-title",{attrs:{"data-background-color":"darkblue"}},[a("span",{staticStyle:{color:"white"}},[t._v("功能限制設定")])]),t._v(" "),a("span",{staticClass:"s-card-title col-auto"})],1),t._v(" "),a("q-card-actions",{attrs:{align:"center"}},[a("div",{staticClass:"s-card-actions",attrs:{"data-background-color":"darkblue"}}),t._v(" "),a("s-btn",{staticStyle:{padding:"0 8px"},attrs:{color:"darkred",big:"",disable:!t.ap.applicationId},on:{click:t.addItem}},[t._v("新增功能限制")]),t._v(" "),a("s-btn",{staticStyle:{padding:"0 8px"},attrs:{color:"darkred",big:"",disable:!t.aItem.aItemId},on:{click:t.editItem}},[t._v("編輯功能限制")]),t._v(" "),a("s-btn",{staticStyle:{padding:"0 8px"},attrs:{color:"darkred",big:"",disable:!t.aItem.aItemId},on:{click:t.delItem}},[t._v("刪除功能限制")])],1),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-main",{staticStyle:{"padding-top":"10px"}},[a("q-scroll-area",{staticStyle:{height:"calc(100vh - 425px)"}},[a("s-datatable",{ref:"aItemTable",attrs:{source:t.aItemList,striped:"",checkboxs:""},on:{checked:t.itemChecked}},t._l(t.itemColumns,function(t,e){return a("s-datatable-column",{key:e,attrs:{column:t},slot:"columns"})}))],1)],1)],1)],1)]),t._v(" "),a("s-modal",{ref:"apModal",attrs:{title:"應用程式維護",width:"600px",height:"270px"}},[a("template",{slot:"content"},[a("s-select",{attrs:{label:"模組",options:t.moduleOptions},model:{value:t.apTemp.module,callback:function(e){t.apTemp.module=e},expression:"apTemp.module"}}),t._v(" "),a("s-input",{attrs:{label:"應用程式名稱",flag:""},model:{value:t.apTemp.applicationName,callback:function(e){t.apTemp.applicationName=e},expression:"apTemp.applicationName"}}),t._v(" "),a("s-input",{attrs:{label:"應用程式路徑",flag:""},model:{value:t.apTemp.route,callback:function(e){t.apTemp.route=e},expression:"apTemp.route"}})],1),t._v(" "),a("s-btn",{attrs:{color:"darkred",big:""},on:{click:t.saveAp},slot:"action"},[t._v("儲存")]),t._v(" "),a("s-btn",{attrs:{color:"darkred",big:""},on:{click:function(e){t.$refs.apModal.close()}},slot:"action"},[t._v("取消")])],2),t._v(" "),a("s-modal",{ref:"aItemModal",attrs:{title:"功能限制維護",width:"440px",height:"420px"}},[a("template",{slot:"content"},[a("s-select",{attrs:{label:"應用程式",options:t.apOptions},model:{value:t.aItemTemp.applicationId,callback:function(e){t.aItemTemp.applicationId=e},expression:"aItemTemp.applicationId"}}),t._v(" "),a("s-select",{attrs:{label:"功能種類",options:t.aItemTypeOptions},model:{value:t.aItemTemp.aItemType,callback:function(e){t.aItemTemp.aItemType=e},expression:"aItemTemp.aItemType"}}),t._v(" "),a("s-input",{attrs:{label:"功能代碼",flag:""},model:{value:t.aItemTemp.aItemCode,callback:function(e){t.aItemTemp.aItemCode=e},expression:"aItemTemp.aItemCode"}}),t._v(" "),a("s-input",{attrs:{label:"功能名稱",flag:""},model:{value:t.aItemTemp.aItemName,callback:function(e){t.aItemTemp.aItemName=e},expression:"aItemTemp.aItemName"}}),t._v(" "),a("s-input",{attrs:{label:"功能參數",type:"textarea","min-rows":5,"max-height":100},model:{value:t.aItemTemp.aItemDefaultValue,callback:function(e){t.aItemTemp.aItemDefaultValue=e},expression:"aItemTemp.aItemDefaultValue"}})],1),t._v(" "),a("s-btn",{attrs:{color:"darkred",big:""},on:{click:t.saveItem},slot:"action"},[t._v("儲存")]),t._v(" "),a("s-btn",{attrs:{color:"darkred",big:""},on:{click:function(e){t.$refs.aItemModal.close()}},slot:"action"},[t._v("取消")])],2)],1)},staticRenderFns:[]}}});